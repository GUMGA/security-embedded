!function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="/",n(0)}([function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(5),a=(o(i),t(3)),r=o(a),s=t(4),l=o(s),d=t(8),c=o(d),u=t(7),p=o(u),g=t(9),m=o(g),f=t(6),b=o(f),h=t(2),v=o(h),y="gumga.securityEmbedded",x=angular.module(y,["ngSanitize","ui.bootstrap",v.default]);x.directive("bindHtmlCompile",r.default),x.directive("securityEmbedded",l.default),x.directive("securityEmbeddedUser",c.default),x.directive("securityEmbeddedPerfil",p.default),x.service("SecurityEmbeddedUserService",m.default),x.service("SecurityEmbeddedPerfilService",b.default),x.run(["$window",function(e){e.securityEmbedded={}}]),n.default=x.name},function(e,n){!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,defaultCollapsed:!1,appendChildOnHover:!0})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(e,n){function t(e){if(!e)return 0;var n,o,i,a=0,r=e.childNodes();if(!r||0===r.length)return 0;for(i=r.length-1;i>=0;i--)n=r[i],o=1+t(n),a=Math.max(a,o);return a}this.scope=e,e.$element=n,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$allowNodeDrop=!1,e.collapsed=!1,e.expandOnHover=!1,e.init=function(t){var o=t[0];e.$treeScope=t[1]?t[1].scope:null,e.$parentNodeScope=o.scope.$nodeScope,e.$modelValue=o.scope.$modelValue[e.$index],e.$parentNodesScope=o.scope,o.scope.initSubNode(e),n.on("$destroy",function(){o.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(n){return e.$parentNodesScope==n.$parentNodesScope},e.isChild=function(n){var t=e.childNodes();return t&&t.indexOf(n)>-1},e.prev=function(){var n=e.index();return n>0?e.siblings()[n-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(n,t){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(n,t)},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed,e.$treeScope.$callbacks.toggle(e.collapsed,e)},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var n=e.$parentNodeScope;return n?n.depth()+1:1},e.maxSubDepth=function(){return e.$childNodesScope?t(e.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodropEnabled=!1,e.maxDepth=0,e.cloneEnabled=!1,e.initSubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=n):null},e.destroySubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=null):null},e.accept=function(n,t){return e.$treeScope.$callbacks.accept(n,e,t)},e.beforeDrag=function(n){return e.$treeScope.$callbacks.beforeDrag(n)},e.isParent=function(n){return n.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.safeApply=function(e){var n=this.$root.$$phase;"$apply"==n||"$digest"==n?e&&"function"==typeof e&&e():this.$apply(e)},e.removeNode=function(n){var t=e.$modelValue.indexOf(n.$modelValue);return t>-1?(e.safeApply(function(){e.$modelValue.splice(t,1)[0]}),e.$treeScope.$callbacks.removed(n)):null},e.insertNode=function(n,t){e.safeApply(function(){e.$modelValue.splice(n,0,t)})},e.childNodes=function(){var n,t=[];if(e.$modelValue)for(n=0;n<e.$modelValue.length;n++)t.push(e.$nodesMap[e.$modelValue[n].$$hashKey]);return t},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(n){var t=e.maxDepth||e.$treeScope.maxDepth;return t>0&&e.depth()+n.maxSubDepth()+1>t}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceholderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.cloneEnabled=!1,e.nodropEnabled=!1,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(n){e.$nodesScope.$element.append(n),e.$emptyElm.remove()},this.resetEmptyElement=function(){e.$nodesScope.$modelValue&&0!==e.$nodesScope.$modelValue.length||!e.emptyPlaceholderEnabled?e.$emptyElm.remove():n.append(e.$emptyElm)},e.resetEmptyElement=this.resetEmptyElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,n){return{restrict:"A",scope:!0,controller:"TreeController",link:function(t,o,i,a){var r,s,l,d={accept:null,beforeDrag:null},c={};angular.extend(c,e),c.treeClass&&o.addClass(c.treeClass),"table"===o.prop("tagName").toLowerCase()?(t.$emptyElm=angular.element(n.document.createElement("tr")),s=o.find("tr"),l=s.length>0?angular.element(s).children().length:1e6,r=angular.element(n.document.createElement("td")).attr("colspan",l),t.$emptyElm.append(r)):t.$emptyElm=angular.element(n.document.createElement("div")),c.emptyTreeClass&&t.$emptyElm.addClass(c.emptyTreeClass),t.$watch("$nodesScope.$modelValue.length",function(e){angular.isNumber(e)&&a.resetEmptyElement()},!0),t.$watch(i.dragEnabled,function(e){"boolean"==typeof e&&(t.dragEnabled=e)}),t.$watch(i.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(t.emptyPlaceholderEnabled=e,a.resetEmptyElement())}),t.$watch(i.nodropEnabled,function(e){"boolean"==typeof e&&(t.nodropEnabled=e)}),t.$watch(i.cloneEnabled,function(e){"boolean"==typeof e&&(t.cloneEnabled=e)}),t.$watch(i.maxDepth,function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(i.dragDelay,function(e){"number"==typeof e&&(t.dragDelay=e)}),d.accept=function(e,n,t){return!(n.nodropEnabled||n.$treeScope.nodropEnabled||n.outOfDepth(e))},d.beforeDrag=function(e){return!0},d.expandTimeoutStart=function(){},d.expandTimeoutCancel=function(){},d.expandTimeoutEnd=function(){},d.removed=function(e){},d.dropped=function(e){},d.dragStart=function(e){},d.dragMove=function(e){},d.dragStop=function(e){},d.beforeDrop=function(e){},d.toggle=function(e,n){},t.$watch(i.uiTree,function(e,n){angular.forEach(e,function(e,n){d[n]&&"function"==typeof e&&(d[n]=e)}),t.$callbacks=d},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(n,t,o,i){var a={};angular.extend(a,e),a.handleClass&&t.addClass(a.handleClass),n!=i.scope&&(n.$nodeScope=i.scope,i.scope.$handleScope=n)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q",function(e,n,t,o,i,a){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(r,s,l,d){var c,u,p,g,m,f,b,h,v,y,x,$,w,S,E,N,z,T,k,O,C,M,U,V,H,R,I,D={},A="ontouchstart"in window,B=null,Y=document.body,X=document.documentElement;angular.extend(D,e),D.nodeClass&&s.addClass(D.nodeClass),r.init(d),r.collapsed=!!n.getNodeAttribute(r,"collapsed")||e.defaultCollapsed,r.expandOnHover=!!n.getNodeAttribute(r,"expandOnHover"),r.scrollContainer=n.getNodeAttribute(r,"scrollContainer")||l.scrollContainer||null,r.sourceOnly=r.nodropEnabled||r.$treeScope.nodropEnabled,r.$watch(l.collapsed,function(e){"boolean"==typeof e&&(r.collapsed=e)}),r.$watch("collapsed",function(e){n.setNodeAttribute(r,"collapsed",e),l.$set("collapsed",e)}),r.$watch(l.expandOnHover,function(e){"boolean"!=typeof e&&"number"!=typeof e||(r.expandOnHover=e)}),r.$watch("expandOnHover",function(e){n.setNodeAttribute(r,"expandOnHover",e),l.$set("expandOnHover",e)}),l.$observe("scrollContainer",function(e){"string"==typeof e&&(r.scrollContainer=e)}),r.$watch("scrollContainer",function(e){n.setNodeAttribute(r,"scrollContainer",e),l.$set("scrollContainer",e),b=document.querySelector(e)}),r.$on("angular-ui-tree:collapse-all",function(){r.collapsed=!0}),r.$on("angular-ui-tree:expand-all",function(){r.collapsed=!1}),$=function(e){if((A||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var i,a,l,d,b,h,$,w,S,E=angular.element(e.target);if(i=n.treeNodeHandlerContainerOfElement(E),i&&(E=angular.element(i)),a=s.clone(),w=n.elementIsTreeNode(E),S=n.elementIsTreeNodeHandle(E),(w||S)&&!(w&&n.elementContainsTreeNodeHandler(E)||(l=E.prop("tagName").toLowerCase(),"input"==l||"textarea"==l||"button"==l||"select"==l))){for(H=angular.element(e.target),R=H[0].attributes["ui-tree"];H&&H[0]&&H[0]!==s&&!R;){if(H[0].attributes&&(R=H[0].attributes["ui-tree"]),n.nodrag(H))return;H=H.parent()}r.beforeDrag(r)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),b=n.eventObj(e),c=!0,u=n.dragInfo(r),I=u.source.$treeScope.$id,d=s.prop("tagName"),"tr"===d.toLowerCase()?(g=angular.element(t.document.createElement(d)),h=angular.element(t.document.createElement("td")).addClass(D.placeholderClass).attr("colspan",s[0].children.length),g.append(h)):g=angular.element(t.document.createElement(d)).addClass(D.placeholderClass),m=angular.element(t.document.createElement(d)),D.hiddenClass&&m.addClass(D.hiddenClass),p=n.positionStarted(b,s),g.css("height",s.prop("offsetHeight")+"px"),f=angular.element(t.document.createElement(r.$parentNodesScope.$element.prop("tagName"))).addClass(r.$parentNodesScope.$element.attr("class")).addClass(D.dragClass),f.css("width",n.width(s)+"px"),f.css("z-index",9999),$=(s[0].querySelector(".angular-ui-tree-handle")||s[0]).currentStyle,$&&(document.body.setAttribute("ui-tree-cursor",o.find("body").css("cursor")||""),o.find("body").css({cursor:$.cursor+"!important"})),r.sourceOnly&&g.css("display","none"),s.after(g),s.after(m),u.isClone()&&r.sourceOnly?f.append(a):f.append(s),o.find("body").append(f),f.css({left:b.pageX-p.offsetX+"px",top:b.pageY-p.offsetY+"px"}),v={placeholder:g,dragging:f},C(),r.$apply(function(){r.$treeScope.$callbacks.dragStart(u.eventArgs(v,p))}),y=Math.max(Y.scrollHeight,Y.offsetHeight,X.clientHeight,X.scrollHeight,X.offsetHeight),x=Math.max(Y.scrollWidth,Y.offsetWidth,X.clientWidth,X.scrollWidth,X.offsetWidth))}}},w=function(e){var o,a,s,l,d,m,$,w,S,E,N,z,T,k,O,C,M,U,H,R,A,Y,X,P=n.eventObj(e);if(f){if(e.preventDefault(),t.getSelection?t.getSelection().removeAllRanges():t.document.selection&&t.document.selection.empty(),s=P.pageX-p.offsetX,l=P.pageY-p.offsetY,s<0&&(s=0),l<0&&(l=0),l+10>y&&(l=y-10),s+10>x&&(s=x-10),f.css({left:s+"px",top:l+"px"}),b?($=b.getBoundingClientRect(),d=b.scrollTop,m=d+b.clientHeight,$.bottom<P.clientY&&m<b.scrollHeight&&(O=Math.min(b.scrollHeight-m,10),b.scrollTop+=O),$.top>P.clientY&&d>0&&(C=Math.min(d,10),b.scrollTop-=C)):(d=window.pageYOffset||t.document.documentElement.scrollTop,m=d+(window.innerHeight||t.document.clientHeight||t.document.clientHeight),m<P.pageY&&m<y&&(O=Math.min(y-m,10),window.scrollBy(0,O)),d>P.pageY&&(C=Math.min(d,10),window.scrollBy(0,-C))),n.positionMoved(e,p,c),c)return void(c=!1);if(S=P.pageX-(t.pageXOffset||t.document.body.scrollLeft||t.document.documentElement.scrollLeft)-(t.document.documentElement.clientLeft||0),E=P.pageY-(t.pageYOffset||t.document.body.scrollTop||t.document.documentElement.scrollTop)-(t.document.documentElement.clientTop||0),angular.isFunction(f.hide)?f.hide():(N=f[0].style.display,f[0].style.display="none"),t.document.elementFromPoint(S,E),T=angular.element(t.document.elementFromPoint(S,E)),V=n.treeNodeHandlerContainerOfElement(T),V&&(T=angular.element(V)),angular.isFunction(f.show)?f.show():f[0].style.display=N,n.elementIsTree(T)?z=T.controller("uiTree").scope:n.elementIsTreeNodeHandle(T)?z=T.controller("uiTreeHandle").scope:n.elementIsTreeNode(T)?z=T.controller("uiTreeNode").scope:n.elementIsTreeNodes(T)?z=T.controller("uiTreeNodes").scope:n.elementIsPlaceholder(T)?z=T.controller("uiTreeNodes").scope:T.controller("uiTreeNode")&&(z=T.controller("uiTreeNode").scope),H=z&&z.$treeScope&&z.$treeScope.$id&&z.$treeScope.$id===I,H&&p.dirAx)p.distX>0&&(o=u.prev(),o&&!o.collapsed&&o.accept(r,o.childNodesCount())&&(o.$childNodesScope.$element.append(g),u.moveTo(o.$childNodesScope,o.childNodes(),o.childNodesCount()))),p.distX<0&&(a=u.next(),a||(w=u.parentNode(),w&&w.$parentNodesScope.accept(r,w.index()+1)&&(w.$element.after(g),u.moveTo(w.$parentNodesScope,w.siblings(),w.index()+1))));else{if(k=!1,!z)return;if(!z.$treeScope||z.$parent.nodropEnabled||z.$treeScope.nodropEnabled||g.css("display",""),"uiTree"===z.$type&&z.dragEnabled&&(k=z.isEmpty()),"uiTreeHandle"===z.$type&&(z=z.$nodeScope),"uiTreeNode"!==z.$type&&!k)return void(D.appendChildOnHover&&(a=u.next(),!a&&h&&(w=u.parentNode(),w.$element.after(g),u.moveTo(w.$parentNodesScope,w.siblings(),w.index()+1),h=!1)));B&&g.parent()[0]!=B.$element[0]&&(B.resetEmptyElement(),B=null),k?(B=z,z.$nodesScope.accept(r,0)&&(z.place(g),u.moveTo(z.$nodesScope,z.$nodesScope.childNodes(),0))):z.dragEnabled()&&(angular.isDefined(r.expandTimeoutOn)&&r.expandTimeoutOn!==z.id&&(i.cancel(r.expandTimeout),delete r.expandTimeout,delete r.expandTimeoutOn,r.$callbacks.expandTimeoutCancel()),z.collapsed&&(r.expandOnHover===!0||angular.isNumber(r.expandOnHover)&&0===r.expandOnHover?(z.collapsed=!1,z.$treeScope.$callbacks.toggle(!1,z)):r.expandOnHover!==!1&&angular.isNumber(r.expandOnHover)&&r.expandOnHover>0&&angular.isUndefined(r.expandTimeoutOn)&&(r.expandTimeoutOn=z.$id,r.$callbacks.expandTimeoutStart(),r.expandTimeout=i(function(){r.$callbacks.expandTimeoutEnd(),z.collapsed=!1,z.$treeScope.$callbacks.toggle(!1,z)},r.expandOnHover))),T=z.$element,M=n.offset(T),A=n.height(T),Y=z.$childNodesScope?z.$childNodesScope.$element:null,X=Y?n.height(Y):0,A-=X,R=D.appendChildOnHover?.25*A:n.height(T)/2,U=P.pageY<M.top+R,z.$parentNodesScope.accept(r,z.index())?U?(T[0].parentNode.insertBefore(g[0],T[0]),u.moveTo(z.$parentNodesScope,z.siblings(),z.index())):D.appendChildOnHover&&z.accept(r,z.childNodesCount())?(z.$childNodesScope.$element.prepend(g),u.moveTo(z.$childNodesScope,z.childNodes(),0),h=!0):(T.after(g),u.moveTo(z.$parentNodesScope,z.siblings(),z.index()+1)):!U&&z.accept(r,z.childNodesCount())&&(z.$childNodesScope.$element.append(g),u.moveTo(z.$childNodesScope,z.childNodes(),z.childNodesCount())))}r.$apply(function(){r.$treeScope.$callbacks.dragMove(u.eventArgs(v,p))})}},S=function(e){var n=u.eventArgs(v,p);e.preventDefault(),M(),i.cancel(r.expandTimeout),r.$treeScope.$apply(function(){a.when(r.$treeScope.$callbacks.beforeDrop(n)).then(function(e){e!==!1&&r.$$allowNodeDrop?(u.apply(),r.$treeScope.$callbacks.dropped(n)):O()}).catch(function(){O()}).finally(function(){m.replaceWith(r.$element),g.remove(),f&&(f.remove(),f=null),r.$treeScope.$callbacks.dragStop(n),r.$$allowNodeDrop=!1,u=null;var e=document.body.getAttribute("ui-tree-cursor");null!==e&&(o.find("body").css({cursor:e}),document.body.removeAttribute("ui-tree-cursor"))})})},E=function(e){r.dragEnabled()&&$(e)},N=function(e){w(e)},z=function(e){r.$$allowNodeDrop=!0,S(e)},T=function(e){S(e)},k=function(){var e;return{exec:function(n,t){t||(t=0),this.cancel(),e=i(n,t)},cancel:function(){i.cancel(e)}}}(),U=function(e){27===e.keyCode&&z(e)},O=function(){s.bind("touchstart mousedown",function(e){r.dragDelay>0?k.exec(function(){E(e)},r.dragDelay):E(e)}),s.bind("touchend touchcancel mouseup",function(){r.dragDelay>0&&k.cancel()})},O(),C=function(){angular.element(o).bind("touchend",z),angular.element(o).bind("touchcancel",z),angular.element(o).bind("touchmove",N),angular.element(o).bind("mouseup",z),angular.element(o).bind("mousemove",N),angular.element(o).bind("mouseleave",T),angular.element(o).bind("keydown",U)},M=function(){angular.element(o).unbind("touchend",z),angular.element(o).unbind("touchcancel",z),angular.element(o).unbind("touchmove",N),angular.element(o).unbind("mouseup",z),angular.element(o).unbind("mousemove",N),angular.element(o).unbind("mouseleave",T),angular.element(o).unbind("keydown",U)}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(n,t,o,i){var a={},r=i[0],s=i[1],l=i[2];angular.extend(a,e),a.nodesClass&&t.addClass(a.nodesClass),s?(s.scope.$childNodesScope=n,n.$nodeScope=s.scope):l.scope.$nodesScope=n,n.$treeScope=l.scope,r&&(r.$render=function(){n.$modelValue=r.$modelValue}),n.$watch(function(){return o.maxDepth},function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(function(){return o.nodropEnabled},function(e){"undefined"!=typeof e&&(n.nodropEnabled=!0)},!0)}}}])}(),function(){"use strict";function e(e,n){if(void 0===n)return null;for(var t=n.parentNode,o=1,i="function"==typeof t.setAttribute&&t.hasAttribute(e)?t:null;t&&"function"==typeof t.setAttribute&&!t.hasAttribute(e);){if(t=t.parentNode,i=t,t===document.documentElement){i=null;break}o++}return i}angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(n,t,o){return{nodesData:{},setNodeAttribute:function(e,n,t){if(!e.$modelValue)return null;var o=this.nodesData[e.$modelValue.$$hashKey];o||(o={},this.nodesData[e.$modelValue.$$hashKey]=o),o[n]=t},getNodeAttribute:function(e,n){if(!e.$modelValue)return null;var t=this.nodesData[e.$modelValue.$$hashKey];return t?t[n]:null},nodrag:function(e){return"undefined"!=typeof e.attr("data-nodrag")&&"false"!==e.attr("data-nodrag")},eventObj:function(e){var n=e;return void 0!==e.targetTouches?n=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(n=e.originalEvent.targetTouches.item(0)),n},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:e.$treeScope.cloneEnabled===!0?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,resetParent:function(){this.parent=e.$parentNodesScope},moveTo:function(e,n,t){this.parent=e,this.siblings=n.slice(0);var o=this.siblings.indexOf(this.source);o>-1&&(this.siblings.splice(o,1),this.source.index()<t&&t--),this.siblings.splice(t,0,this.source),this.index=t},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,n){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:n}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var o=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:o.top+(t.pageYOffset||n[0].body.scrollTop||n[0].documentElement.scrollTop),left:o.left+(t.pageXOffset||n[0].body.scrollLeft||n[0].documentElement.scrollLeft)}},positionStarted:function(e,n){var t={},o=e.pageX,i=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(o=e.originalEvent.touches[0].pageX,i=e.originalEvent.touches[0].pageY),t.offsetX=o-this.offset(n).left,t.offsetY=i-this.offset(n).top,t.startX=t.lastX=o,t.startY=t.lastY=i,t.nowX=t.nowY=t.distX=t.distY=t.dirAx=0,t.dirX=t.dirY=t.lastDirX=t.lastDirY=t.distAxX=t.distAxY=0,t},positionMoved:function(e,n,t){var o,i=e.pageX,a=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(i=e.originalEvent.touches[0].pageX,a=e.originalEvent.touches[0].pageY),n.lastX=n.nowX,n.lastY=n.nowY,n.nowX=i,n.nowY=a,n.distX=n.nowX-n.lastX,n.distY=n.nowY-n.lastY,n.lastDirX=n.dirX,n.lastDirY=n.dirY,n.dirX=0===n.distX?0:n.distX>0?1:-1,n.dirY=0===n.distY?0:n.distY>0?1:-1,o=Math.abs(n.distX)>Math.abs(n.distY)?1:0,t?(n.dirAx=o,void(n.moving=!0)):(n.dirAx!==o?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),0!==n.dirX&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),0!==n.dirY&&n.dirY!==n.lastDirY&&(n.distAxY=0)),void(n.dirAx=o))},elementIsTreeNode:function(e){return"undefined"!=typeof e.attr("ui-tree-node")},elementIsTreeNodeHandle:function(e){return"undefined"!=typeof e.attr("ui-tree-handle")},elementIsTree:function(e){return"undefined"!=typeof e.attr("ui-tree")},elementIsTreeNodes:function(e){return"undefined"!=typeof e.attr("ui-tree-nodes")},elementIsPlaceholder:function(e){return e.hasClass(o.placeholderClass)},elementContainsTreeNodeHandler:function(e){return e[0].querySelectorAll("[ui-tree-handle]").length>=1},treeNodeHandlerContainerOfElement:function(n){return e("ui-tree-handle",n[0])}}}])}()},function(e,n,t){t(1),e.exports="ui.tree"},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=function(e){return{restrict:"A",link:function(n,t,o){n.$watch(function(){return n.$eval(o.bindHtmlCompile)},function(i){t.html(i&&i.toString());var a=n;o.bindHtmlScope&&(a=n.$eval(o.bindHtmlScope)),e(t.contents())(a)})}}};t.$inject=["$compile"],n.default=t},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o='\n  <div class="row">\n\n    <div class="col-xs-12" ng-if="initSuccess == \'success\'">\n      <uib-tabset active="activePill">\n        <uib-tab ng-repeat="tab in tabs track by $index" index="$index" heading="{{tab.label}}" ng-if="tab.visible">\n          <div bind-html-compile="tab.template"></div>\n        </uib-tab>\n      </uib-tabset>\n    </div>\n\n  </div>\n',i=function(e,n,i){return{restrict:"E",template:o,scope:{configuration:"="},link:function(o,a,r){var s=o,l=function(){if(s.initSuccess="loading",!s.configuration||"object"!=t(s.configuration))throw"Atenção, o SecurityEmbedded precisa do objeto de configuração, acesse http://www.github.com/gumga/security-embedded para mais detalhes.";if(!s.configuration.appURL||"string"!=typeof s.configuration.appURL)throw"Atenção, o SecurityEmbedded precisa que no objeto de configuração tenha o atributo appURL informando a rota da sua api, acesse http://www.github.com/gumga/security-embedded para mais detalhes.";n.securityEmbedded.appURL=s.configuration.appURL,n.securityEmbedded.getToken=function(){if(s.configuration.eternalToken)return s.configuration.eternalToken;var e=JSON.parse(sessionStorage.getItem("user"));if(!e||!e.token)throw"Atenção, não encontramos token na configuração e nem na sessão, por fazer verifique e tente novamente.";return e.token},n.securityEmbedded.getToken(),n.securityEmbedded.getOrganizationHierarchyCode=function(){var e=JSON.parse(sessionStorage.getItem("user"));if(!e||!e.organizationHierarchyCode)throw"Atenção, o SecurityEmbedded precisa do código de hierarquia de uma organização, adicione no objeto de configuração ou insira na sua sessão.";return e.organizationHierarchyCode},n.securityEmbedded.getOrganizationHierarchyCode(),i.getInstance().then(function(e){n.securityEmbedded.instance=e.data,s.initSuccess="success"},function(e){throw"Não podemos inicar o segurity-embedded, aparentemente, o usuário não possui permissão na manipulação de dados do segurança."})};l();var d=function(e,n){var t=!0;return"boolean"==typeof e&&(t=e),t},c=function(n){return e.trustAsHtml(n)};s.tabs=[{label:"Organizações e usuários",visible:d(s.configuration.user),template:c("<security-embedded-user></security-embedded-user>")},{label:"Perfis",visible:d(s.configuration.perfil),template:c("<security-embedded-perfil></security-embedded-perfil>")}]}}};i.$inject=["$sce","$window","SecurityEmbeddedPerfilService"],n.default=i},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t="\n.angular-ui-tree-empty{border:1px dashed #bbb;min-height:100px;background-color:#e5e5e5;background-image:-webkit-linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff),-webkit-linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff);background-image:linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff),linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff);background-size:60px 60px;background-position:0 0,30px 30px;pointer-events:none}.angular-ui-tree-nodes{position:relative;margin:0;padding:0;list-style:none}.angular-ui-tree-nodes .angular-ui-tree-nodes{padding-left:20px}.angular-ui-tree-node,.angular-ui-tree-placeholder{position:relative;margin:0;padding:0;min-height:20px;line-height:20px}.angular-ui-tree-hidden{display:none}.angular-ui-tree-placeholder{margin:5px 0;padding:0;min-height:30px}.angular-ui-tree-handle{cursor:move;text-decoration:none;font-weight:700;box-sizing:border-box;min-height:20px;line-height:20px}.angular-ui-tree-drag{position:absolute;pointer-events:none;z-index:999;opacity:.8}\n\n.security-embedded .angular-ui-tree-handle {\n  background: none repeat scroll 0 0 #f3f3f4;\n  border: 1px dashed #e7eaec;\n  color: inherit;\n  padding: 10px;\n  font-weight: normal;\n}\n\n.security-embedded .angular-ui-tree-handle:hover {\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.security-embedded .angular-ui-tree-placeholder {\n  background: #f0f9ff;\n  border: 1px dashed #bed2db;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n.security-embedded .group-title {\n  background-color: #687074 !important;\n  color: #FFF !important;\n}\n\n.security-embedded .tree-node {\n  background: none repeat scroll 0 0 #f3f3f4;\n  border: 1px dashed #e7eaec;\n  color: inherit;\n  padding: 10px;\n  border-radius: 3px;\n}\n\n.security-embedded .tree-node .btn {\n  min-width: 22px;\n  margin-right: 4px;\n}\n\n.security-embedded .tree-node-content {\n  margin: 5px 5px 5px 0;\n}\n\n.security-embedded .tree-handle {\n  background: none repeat scroll 0 0 #f3f3f4;\n  border: 1px dashed #e7eaec;\n  color: inherit;\n  padding: 10px;\n}\n\n.security-embedded .angular-ui-tree-placeholder {\n  background: #f0f9ff;\n  border: 1px dashed #bed2db;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n.security-embedded .dados-center {\n  margin-left: 15%;\n}\n\n.security-embedded .ui-tree-button-arrow{\n  padding: 0;\n  padding-top: 5px;\n}\n\n.security-embedded .qs {\n    /*background-color: #02bdda;*/\n    border-radius: 16px;\n    cursor: pointer;\n    /*color: #e3fbff;*/\n    display: inline-block;\n    font-family: 'Helvetica',sans-serif;\n    font-size: 18px;\n    font-weight: bold;\n    height: 30px;\n    line-height: 30px;\n    position: relative;\n    text-align: center;\n    width: 30px;\n}\n\n.security-embedded .qs:hover{\n    color: #209F94;\n    /*background: #209F94;*/\n}\n\n.security-embedded .qs .popover {\n    background-color: rgba(0, 0, 0, 0.85);\n    border-radius: 5px;\n    bottom: 42px;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);\n    color: #fff;\n    display: none;\n    text-align: center;\n    font-size: 12px;\n    font-family: 'Helvetica',sans-serif;\n    top: -40px;\n    left: -85px;\n    padding: 7px 10px;\n    position: absolute;\n    width: 200px;\n    z-index: 4;\n    height: 33px;\n}\n.security-embedded .qs .popover:before {\n    border-top: 7px solid rgba(0, 0, 0, 0.85);\n    border-right: 7px solid transparent;\n    border-left: 7px solid transparent;\n    bottom: -7px;\n    content: '';\n    display: block;\n    left: 50%;\n    margin-left: -7px;\n    position: absolute;\n}\n.security-embedded .qs:hover .popover {\n    display: block;\n    -webkit-animation: fade-in .3s linear 1, move-up .3s linear 1;\n    -moz-animation: fade-in .3s linear 1, move-up .3s linear 1;\n    -ms-animation: fade-in .3s linear 1, move-up .3s linear 1;\n}\n\n@-webkit-keyframes fade-in {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n@-moz-keyframes fade-in {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n@-ms-keyframes fade-in {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n@-webkit-keyframes move-up {\n    from {\n        bottom: 30px;\n    }\n    to {\n        bottom: 42px;\n    }\n}\n@-moz-keyframes move-up {\n    from {\n        bottom: 30px;\n    }\n    to {\n        bottom: 42px;\n    }\n}\n@-ms-keyframes move-up {\n    from {\n        bottom: 30px;\n    }\n    to {\n        bottom: 42px;\n    }\n}\n\n@media screen and (max-width: 992px) {\n  .dados-center {\n      margin-left: 15%;\n  }\n}\n\n\n.security-embedded .breadcrumb-security-embedded > li > a{\n    cursor : pointer;\n}\n\n",o=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),i.appendChild(o),n.default=t},function(e,n){"use strict";function t(e,n){var t={},o=function(){return{gumgaToken:n.securityEmbedded?n.securityEmbedded.getToken():0}};return t.getInstance=function(){return e.get(n.securityEmbedded.appURL+"/api/security-embedded/get-instance",{headers:o()})},t.saveRole=function(t){return e.post(n.securityEmbedded.appURL+"/api/security-embedded/save-role",t,{headers:o()})},t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t,t.$inject=["$http","$window"]},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t='\n  <div class="row security-embedded">\n\n    <div class="col-xs-12" ng-if="view == \'list-role\'">\n      <div class="gmd panel panel-default">\n        <div class="gmd panel-body">\n\n          <ol class="gmd breadcrumb breadcrumb-security-embedded">\n            <li><a ng-click="alterView(\'list-role\')">Listagem de perfis</a></li>\n          </ol>\n\n          <div ng-if="listRoleMessage" align="center">\n            <label ng-if="listRoleMessage.status == \'error\'" class="text text-danger">{{listRoleMessage.message}}</label>\n            <br/>\n            <button ng-if="listRoleMessage.status == \'error\'" ng-click="getRolesByInstance()" class="gmd btn btn-primary">Tentar novamente</button>\n            <label ng-if="listRoleMessage.status == \'loading\'" class="text text-muted">{{listRoleMessage.message}}</label>\n          </div>\n\n          <div class="row" ng-show="!listRoleMessage">\n            <div class="col-xs-12 col-sm-6 pull-left">\n                <button class="gmd btn btn-primary" ng-click="addRole()">Novo perfil</button>\n            </div>\n            <div class="col-xs-12 col-sm-6 pull-right">\n                <input class="gmd form-control" placeholder="Pesquisar perfis" ng-model="filterRole"/>\n            </div>\n          </div>\n\n          <div class="row" ng-if="perfis.length > 0" ng-show="!listRoleMessage">\n              <div class="col-xs-12">\n              <br>\n              <table class="gmd table table-bordered table-hover">\n                 <tr>\n                  <th>Descrição</th>\n                  <th></th>\n                 <tr>\n                 <tr ng-repeat="perfil in perfis | filter:{name:filterRole}">\n                  <td>{{perfil.name}}</td>\n                  <td>\n                    <button class="gmd btn btn-primary" ng-click="editRole(perfil)">Editar</button>\n                    <button class="gmd btn btn-danger"  ng-if="perfil.exists" ng-disabled="perfil.disabled" ng-click="removeUserInRole(perfil)">Remover</button>\n                  </td>\n                 <tr>\n              </table>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n\n    <div class="col-xs-12" ng-if="view == \'new-role\' || view == \'edit-role\'">\n      <div class="gmd panel panel-default">\n        <div class="gmd panel-body">\n\n          <ol class="gmd breadcrumb breadcrumb-security-embedded">\n            <li><a ng-click="alterView(\'list-role\')">Listagem de perfis</a></li>\n            <li><a >{{view == \'edit-role\' ? \'Editando : \' : \'Novo perfil\'}} {{view == \'edit-role\' ? role.name : \'\'}} </a></li>\n          </ol>\n\n          <div class="row">\n            <div class="col-xs-12">\n                <label class="text-muted">Nome</label>\n                <input class="gmd form-control" placeholder="Qual nome desse perfil?" ng-model="role.name"/>\n            </div>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-12 col-sm-6">\n                <br/>\n                <label class="text-muted">Usuários</label>\n                <div class="gmd panel panel-default">\n                  <div class="panel-heading">\n                    <input type="text" ng-model="userTypeHead"\n                      typeahead-min-length="0"\n                      typeahead-on-select="addUserInRole($item); userTypeHead = \'\'"\n                      placeholder="Pesquise para adicionar"\n                      typeahead-editable="false"\n                      uib-typeahead="user as user.name for user in users | filter:$viewValue | limitTo:10 | orderBy: \'name\'"\n                      class="gmd form-control">\n                  </div>\n                  <div class="panel-body" style="max-height: 400px;overflow: auto;" id="security-embedded-user-especfications">\n                  <table class="gmd table table-hover" ng-if="role.users.length > 0">\n                    <tr>\n                        <th>Nome</th>\n                        <th></th>\n                    </tr>\n                    <tr ng-repeat="user in role.users">\n                      <td>{{user.name}}</td>\n                      <td>\n                        <button class="gmd btn btn-primary" ng-click="removeUserRole(user)">Remover</button>\n                      </td>\n                    </tr>\n                  </table>\n                  </div>\n                </div>\n            </div>\n            <div class="col-xs-12 col-sm-6">\n                <script type="text/ng-template" id="customTemplate.html">\n                  <a style="cursor:pointer;">\n                      <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span><br/>\n                      {{match.model.software.name}}\n                  </a>\n                </script>\n                <br/>\n                <label class="text-muted">Operações</label>\n                <div class="gmd panel panel-default">\n                  <div class="panel-heading">\n                    <input type="text" ng-model="operationTypeHead"\n                      typeahead-min-length="0"\n                      typeahead-template-url="customTemplate.html"\n                      typeahead-on-select="addOperationInRole($item); operationTypeHead = \'\'"\n                      placeholder="Pesquise para adicionar"\n                      typeahead-editable="false"\n                      uib-typeahead="operation as operation.operation.name for operation in getOperations($viewValue) | limitTo:10 | orderBy: \'name\'"\n                      class="gmd form-control">\n                  </div>\n                  <div class="panel-body" style="max-height: 400px;overflow: auto;" id="security-embedded-role-especfications">\n                  <table class="gmd table table-hover" ng-if="role.especifications.length > 0">\n                    <tr>\n                        <th>Nome</th>\n                        <th>Tipo</th>\n                        <th></th>\n                    </tr>\n                    <tr ng-repeat="especification in role.especifications">\n                      <td>{{especification.operation.name}}</td>\n                      <td>\n                        <select ng-model="especification.type" class="gmd form-control">\n                          <option value="ADD">Permitir</option>\n                          <option value="REMOVE">Negar</option>\n                        </select>\n                      </td>\n                      <td>\n                        <button class="gmd btn btn-primary" ng-click="removeEspecificationRole(especification)">Remover</button>\n                      </td>\n                    </tr>\n                  </table>\n                  </div>\n                </div>\n            </div>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-12">\n              <hr>\n              <button\n                class="gmd btn btn-primary pull-right"\n                ng-disabled="disabledSaveRole"\n                ng-click="saveRole(role)">Salvar</button>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n',o=function(e,n,o,i){
return{restrict:"E",template:t,scope:{},link:function(t,a,r){var s=t;s.view="list-role",s.users=[],s.operationsSpecification=[],s.alterView=function(e){s.view=e},s.addOperationInRole=function(e){s.role.especifications.push({discriminator:"op",type:"ADD",operation:e.operation});var n=document.getElementById("security-embedded-role-especfications");i(function(){var e=n.scrollHeight;n.scrollTop=e},500)},s.getRolesByInstance=function(){s.listRoleMessage={status:"loading",message:"Buscando os perfis, aguarde um momento..."},n.getRolesByInstance().then(function(e){s.perfis=e.data,delete s.listRoleMessage},function(e){s.listRoleMessage={status:"error",message:"Não conseguimos buscar os perfis, verifique suas permissões e tente novamente."}})},s.userByOrganization=function(e){n.getUsersByOrganization(e).then(function(e){s.users=e.data,"edit-role"==s.view&&s.role.users.forEach(function(e){s.users=s.users.filter(function(n){return n.id!=e.id})})})},s.getInstance=function(){e.getInstance().then(function(e){o.securityEmbedded.instance=e.data})},s.addRole=function(){s.getInstance(),s.disabledSaveRole=!1,s.alterView("new-role"),s.role={instance:o.securityEmbedded.instance,users:[],especifications:[]},s.userByOrganization(o.securityEmbedded.instance.organization.id),s.getOperations()},s.editRole=function(e){s.disabledSaveRole=!1,s.alterView("edit-role"),s.role=angular.copy(e),s.userByOrganization(o.securityEmbedded.instance.organization.id),s.getOperations()},s.addUserInRole=function(e){s.role.users.push(angular.copy(e)),s.users=s.users.filter(function(n){return n.id!=e.id});var n=document.getElementById("security-embedded-user-especfications");i(function(){var e=n.scrollHeight;n.scrollTop=e},500)},s.removeUserRole=function(e){s.users.push(angular.copy(e)),s.role.users=s.role.users.filter(function(n){return n.id!=e.id})},s.removeEspecificationRole=function(e){s.role.especifications=s.role.especifications.filter(function(n){return n.operation.id!=e.operation.id})};var l=function(e){var n=s.role.especifications.filter(function(n){return n.operation.id==e.id}).length>0;return n};s.getOperations=function(e){var n=[];return s.role.instance.softwares.filter(function(e){return e.operations.length>0}).forEach(function(t){t.operations.forEach(function(o){e&&o.name.toLowerCase().indexOf(e.toLowerCase())==-1||l(o)||n.push({operation:o,software:t})})}),n},s.saveRole=function(n){var t=[],o=[],i=[];n.especifications.forEach(function(e){switch(e.discriminator){case"op":t.push(e);break;case"ip":o.push(e);break;case"time":i.push(e);break;default:t.push(e)}}),s.disabledSaveRole=!0,e.saveRole({role:n,operationsEspecifications:t,ipEspecifications:o,timeEspecifications:i}).then(function(e){delete s.role,swal({title:"",type:"success",text:"Perfil salvo com sucesso"}),s.alterView("list-role"),s.disabledSaveRole=!0,s.getRolesByInstance()},function(e){s.disabledSaveRole=!1,swal({title:"",type:"error",text:e.data.details})})},s.getRolesByInstance()}}};o.$inject=["SecurityEmbeddedPerfilService","SecurityEmbeddedUserService","$window","$timeout"],n.default=o},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t='\n  <div class="row security-embedded">\n\n    <div class="col-xs-12" ng-show="view == \'list-orgs\'">\n      <div class="gmd panel panel-default">\n        <div class="gmd panel-body">\n        <ol class="gmd breadcrumb breadcrumb-security-embedded">\n          <li><a ng-click="alterView(\'list-orgs\')">Listagem de organizações</a></li>\n        </ol>\n        <div class="row">\n          <div class="col-xs-12">\n            <div class="row">\n                <div class="col-md-12">\n                    <div ng-show="organizationMessage" align="center">\n                      <label ng-show="organizationMessage.status == \'error\'" class="text text-danger">{{organizationMessage.message}}</label>\n                      <br/>\n                      <button ng-show="organizationMessage.status == \'error\'" ng-click="getOrganization()" class="gmd btn btn-primary">Tentar novamente</button>\n                      <label ng-show="organizationMessage.status == \'loading\'" class="text text-muted">{{organizationMessage.message}}</label>\n                    </div>                    \n                    <div ui-tree="vm.treeOptions" data-max-depth="1" id="tree-root" class="angular-ui-tree">\n                    \n                        <ol ui-tree-nodes ng-model="organizations"\n                            class="angular-ui-tree-nodes">\n                            <li ui-tree-node class="angular-ui-tree-node" data-nodrag ng-repeat="org in organizations"\n                                ng-include="\'nodes_render.html\'">\n                            </li>\n                        </ol>\n                    </div>\n                </div>\n            </div>\n          </div>\n        </div>\n\n        <script type="text/ng-template" id="nodes_render.html">\n            <div ui-tree-handle class="tree-node tree-node-content" style="padding: 3px;position:relative;">\n                <a class="btn" data-nodrag ng-click="myToggle(this)"\n                   style="background: transparent;border: none;padding: 12px;"\n                   ng-init="initCollapsed(this, obj.subs == null)">\n                    <span class="ui-tree-button-arrow">\n\n                        <svg version="1.1"\n                          ng-show="collapsed"\n                          xmlns="http://www.w3.org/2000/svg"\n                          xmlns:xlink="http://www.w3.org/1999/xlink"\n                          x="0px" y="0px"\n                          width="10px" height="10px"\n                          viewBox="0 0 306 306"\n                          style="enable-background:new 0 0 306 306;margin-top: 5px;" xml:space="preserve">\n                          <g>\n                            <g id="chevron-right">\n                              <polygon points="94.35,0 58.65,35.7 175.95,153 58.65,270.3 94.35,306 247.35,153" style="fill: #54545a;"/>\n                            </g>\n                          </g>\n                        </svg>\n\n                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg"\n                           ng-show="!collapsed"\n                           xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                        \t width="10px" height="10px" viewBox="0 0 306 306"\n                           style="enable-background:new 0 0 306 306;margin-top: 5px;" xml:space="preserve">\n                        <g>\n                        \t<g id="expand-more">\n                        \t\t<polygon points="270.3,58.65 153,175.95 35.7,58.65 0,94.35 153,247.35 306,94.35"  style="fill: #54545a;"/>\n                        \t</g>\n                        </g>\n                        </svg>\n\n                    </span>\n                </a>\n                <span class="text-muted" ng-click="editOrg(org)" style="height: 100%;padding-top: 13px;position: absolute;">{{org.name}}</span>\n\n                <button type="button" class="pull-right "\n                        style="padding: 2px 6px;background: transparent;border: none;margin-top: 3px;outline: none;height: 42px;width: 40px;"\n                        ng-disabled="!removable(obj) && obj.id" data-nodrag\n                        ng-click="newOrg(this.$modelValue, this);">\n                        <span class="qs" style="position:absolute;">\n                            <span class="popover above">Adicionar organização</span>\n                        </span>\n                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg"\n                          xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                      \t  viewBox="0 0 512 512"\n                         style="enable-background:new 0 0 80.13 80.13;" xml:space="preserve">\n                          <g>\n                          <path d="M0,512h256V0H0V512z M160,64h64v64h-64V64z M160,192h64v64h-64V192z M160,320h64v64h-64V320z M32,64h64v64H32V64z M32,192\n  h64v64H32V192z M32,320h64v64H32V320z M288,160h224v32H288V160z M288,512h64V384h96v128h64V224H288V512z" style="fill: #54545a;"/>\n                          </g>\n                        </svg>\n                </button>\n\n                <button type="button" class="pull-right "\n                        style="padding: 2px 6px;background: transparent;border: none;margin-top: 3px;outline: none;height: 42px;width: 40px;"\n                        ng-disabled="!removable(obj) && obj.id" data-nodrag\n                        ng-click="listUsers(this.$modelValue);">\n                        <span class="qs" style="position:absolute;">\n                            <span class="popover above">Usuários</span>\n                        </span>\n                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg"\n                          xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                      \t  viewBox="0 0 80.13 80.13"\n                         style="enable-background:new 0 0 80.13 80.13;" xml:space="preserve">\n                          <g>\n                          \t<path d="M48.355,17.922c3.705,2.323,6.303,6.254,6.776,10.817c1.511,0.706,3.188,1.112,4.966,1.112\n                          \t\tc6.491,0,11.752-5.261,11.752-11.751c0-6.491-5.261-11.752-11.752-11.752C53.668,6.35,48.453,11.517,48.355,17.922z M40.656,41.984\n                          \t\tc6.491,0,11.752-5.262,11.752-11.752s-5.262-11.751-11.752-11.751c-6.49,0-11.754,5.262-11.754,11.752S34.166,41.984,40.656,41.984\n                          \t\tz M45.641,42.785h-9.972c-8.297,0-15.047,6.751-15.047,15.048v12.195l0.031,0.191l0.84,0.263\n                          \t\tc7.918,2.474,14.797,3.299,20.459,3.299c11.059,0,17.469-3.153,17.864-3.354l0.785-0.397h0.084V57.833\n                          \t\tC60.688,49.536,53.938,42.785,45.641,42.785z M65.084,30.653h-9.895c-0.107,3.959-1.797,7.524-4.47,10.088\n                          \t\tc7.375,2.193,12.771,9.032,12.771,17.11v3.758c9.77-0.358,15.4-3.127,15.771-3.313l0.785-0.398h0.084V45.699\n                          \t\tC80.13,37.403,73.38,30.653,65.084,30.653z M20.035,29.853c2.299,0,4.438-0.671,6.25-1.814c0.576-3.757,2.59-7.04,5.467-9.276\n                          \t\tc0.012-0.22,0.033-0.438,0.033-0.66c0-6.491-5.262-11.752-11.75-11.752c-6.492,0-11.752,5.261-11.752,11.752\n                          \t\tC8.283,24.591,13.543,29.853,20.035,29.853z M30.589,40.741c-2.66-2.551-4.344-6.097-4.467-10.032\n                          \t\tc-0.367-0.027-0.73-0.056-1.104-0.056h-9.971C6.75,30.653,0,37.403,0,45.699v12.197l0.031,0.188l0.84,0.265\n                          \t\tc6.352,1.983,12.021,2.897,16.945,3.185v-3.683C17.818,49.773,23.212,42.936,30.589,40.741z"  style="fill: #54545a;"/>\n                          </g>\n                        </svg>\n                </button>\n\n                <div class="clearfix"></div>\n            </div>\n\n            <ol ui-tree-nodes ng-class="{hidden: collapsed}" ng-model="org.subOrganizations"\n                class="angular-ui-tree-nodes">\n                <li ui-tree-node class="angular-ui-tree-node" ng-repeat="org in org.subOrganizations"\n                    ng-include="\'nodes_render.html\'" collapsed="true">\n                </li>\n            </ol>\n\n        </script>\n\n      </div>\n      </div>\n    </div>\n\n    <div class="col-xs-12" ng-show="view == \'list-users\'">\n        <div class="gmd panel panel-default">\n          <div class="panel-body">\n            <ol class="breadcrumb breadcrumb-security-embedded">\n              <li><a ng-click="alterView(\'list-orgs\')">Listagem de organizações</a></li>\n              <li><a ng-click="alterView(\'list-users\')">Listagem de usuários : {{variables.organizationSelected.name}}</a></li>\n            </ol>\n\n            <div ng-show="usersMessage" align="center">\n              <label ng-show="usersMessage.status == \'error\'" class="text text-danger">{{usersMessage.message}}</label>\n              <br/>\n              <button ng-show="usersMessage.status == \'error\'" ng-click="getUsersByOrganization(variables.organizationSelected.id)"\n              class="gmd btn btn-primary">Tentar novamente</button>\n              <label ng-show="usersMessage.status == \'loading\'" class="text text-muted">{{usersMessage.message}}</label>\n            </div>\n\n            <div class="table-responsive">\n              <div class="col-xs-12 col-sm-6 pull-left" style="padding: 0;">\n                  <button class="gmd btn btn-primary" ng-click="addNewUser()">Novo usuário</button>\n              </div>\n              <div class="col-xs-12 col-sm-6 pull-right">\n                  <input class="gmd form-control" placeholder="Pesquisar usuários" ng-model="filterUser"/>\n              </div>\n              <br/><br/>\n              <table class="gmd table table-stripped table-hover" ng-show="!usersMessage">\n                  <tr>\n                    <th>Nome</th>\n                    <th>E-mail</th>\n                    <th>Status</th>\n                    <th>Acões</th>\n                  </tr>\n                  <tr ng-repeat="user in users | filter:{name:filterUser}">\n                    <td>{{user.name}}</td>\n                    <td>{{user.login}}</td>\n                    <td>{{user.status.value ? \'Ativo\': \'Inativo\'}}</td>\n                    <td>\n                      <button class="gmd btn btn-primary" ng-click="editUser(user)">\n                        Editar\n                      </button>\n                      <button class="gmd btn btn-danger" ng-click="removeUserInOrganization(user)">\n                        Remover\n                      </button>\n                    </td>\n                  </tr>\n              </table>\n            </div>\n          </div>\n        </div>\n    </div>\n\n    <div class="col-xs-12" ng-show="view == \'edit-user\' || view == \'new-user\'">\n        <div class="gmd panel panel-default">\n          <div class="panel-body">\n\n          <ol class="breadcrumb breadcrumb-security-embedded">\n            <li><a ng-click="alterView(\'list-orgs\')">Listagem de organizações</a></li>\n            <li><a ng-click="alterView(\'list-users\')">Listagem de usuários : {{variables.organizationSelected.name}}</a></li>\n            <li><a >{{view == \'edit-user\' ? \'Editando : \' : \'Novo usuário\'}}  {{variables.userSelected.name}}</a></li>\n          </ol>\n\n          <div ng-show="userMessage" align="center">\n            <label ng-show="userMessage.status == \'error\'" class="text text-danger">{{userMessage.message}}</label>\n            <br/>\n            <button ng-show="userMessage.status == \'error\'" ng-click="getUserByEmail(variables.userSelected.login)"\n            class="gmd btn btn-primary">Tentar novamente</button>\n            <label ng-show="userMessage.status == \'loading\'" class="text text-muted">{{userMessage.message}}</label>\n          </div>\n\n          <div ng-show="user">\n            <form>\n\n              <div class="row">\n                <div class="col-xs-12 col-md-4">\n                    <label class="text-muted">E-mail</label>\n                    <input class="gmd form-control" ng-model="user.login" ng-change="validateUser()" ng-model-options="{ debounce: 1000 }"/>\n                </div>\n                <div class="col-xs-12 col-md-4">\n                    <label class="text-muted">Nome</label>\n                    <input class="gmd form-control" ng-model="user.name"/>\n                </div>\n                <div class="col-xs-12 col-md-4">\n                    <label class="text-muted">Código interno</label>\n                    <input class="gmd form-control" ng-model="user.internalCode"/>\n                </div>                \n              </div>\n\n              <div class="row" ng-show="view == \'new-user\'">\n                <br/>\n                <div class="col-xs-12 col-md-6">\n                    <label class="text-muted">Senha</label>\n                    <input type="password" class="gmd form-control" ng-model="user.password"/>\n                </div>\n                <div class="col-xs-12 col-md-6">\n                    <label class="text-muted">Confirme a senha</label>\n                    <input type="password" class="gmd form-control" ng-model="user.confirmPassword"/>\n                </div>\n              </div>\n\n              <div class="row" ng-show="perfis.length > 0">\n                <div class="col-xs-12 col-md-6">\n                  <br>\n                  <label class="text-muted">Perfis</label>\n                  <table class="gmd table table-bordered" style=" text-align: center;">\n                     <tr>\n                      <th>Descrição</th>\n                      <th></th>\n                     <tr>\n                     <tr ng-repeat="perfil in perfis">\n                      <td>{{perfil.description}}</td>\n                      <td>\n                        <button class="gmd btn btn-primary" ng-show="!perfil.exists" ng-disabled="perfil.disabled" ng-click="addUserInRole(perfil)">Adicionar</button>\n                        <button class="gmd btn btn-danger"  ng-show="perfil.exists" ng-disabled="perfil.disabled" ng-click="removeUserInRole(perfil)">Remover</button>\n                      </td>\n                     <tr>\n                  </table>\n                </div>\n              </div>\n\n              <div class="row">\n                <div class="col-xs-12">\n                  <hr>\n                  <label ng-show="userExists && userExists.id" class="text text-danger">\n                    O E-mail informado está sendo usado por outro usuário.\n                    <button class="gmd btn btn-primary" ng-click="editUser(userExists)">Ver usuário</button>\n                  </label>\n                  <label class="text text-muted" ng-show="!userIsInTheOrganization()">\n                    Esse usuário não está na organização {{variables.organizationSelected.name}}.\n                    <button class="gmd btn btn-primary" ng-disabled="addingUser" ng-click="addUserInOrganization(variables.userSelected)">Adicionar</button>\n                  </label>\n                  <button\n                    class="gmd btn btn-primary pull-right"\n                    ng-disabled="disabledSaveUser\n                    || (view == \'new-user\' && (!user.password) || user.password != user.confirmPassword)"\n                    ng-click="saveUser(user)">Salvar</button>\n                </div>\n              </div>\n\n            </form>\n          </div>\n\n          </div>\n        </div>\n    </div>\n\n    <div class="col-xs-12" ng-show="view == \'edit-org\' || view == \'new-org\'">\n      <div class="gmd panel panel-default">\n        <div class="panel-body">\n\n          <ol class="breadcrumb breadcrumb-security-embedded">\n            <li><a ng-click="alterView(\'list-orgs\')">Listagem de organizações</a></li>\n            <li><a ng-click="alterView(\'edit-org\')">{{view == \'edit-org\' ? \'Editando : \' : \'Nova organização\'}}  {{organization.name}}</a></li>\n          </ol>\n\n          <div class="row">\n            <div class="col-xs-12 col-sm-6">\n                <label class="text-muted">Nome</label>\n                <input class="gmd form-control" ng-model="organization.name"/>\n            </div>\n            <div class="col-xs-12 col-sm-6">\n                <label class="text-muted">Código interno</label>\n                <input class="gmd form-control" ng-model="organization.internalCode"/>\n            </div>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-12">\n              <hr>\n              <button\n                class="gmd btn btn-primary pull-right"\n                ng-disabled="disabledSaveOrganization"\n                ng-click="saveOrganization(organization)">Salvar</button>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n  </div>\n',o=function(e,n){return{restrict:"E",template:t,scope:{},link:function(t,o,i){var a=t;a.filterUser="",a.view="list-orgs",a.alterView=function(e){a.view=e},a.variables={organizationSelected:void 0,userSelected:void 0},a.initCollapsed=function(e,n){n||e.$nodeScope.toggle()},a.myToggle=function(e){e.$nodeScope.$modelValue,e.$nodeScope.toggle()},a.getUsersByOrganization=function(n){a.usersMessage={status:"loading",message:"Buscando os usuários, aguarde um momento..."},e.getUsersByOrganization(n).then(function(e){a.users=e.data,delete a.usersMessage},function(e){a.usersMessage={status:"error",message:"Não conseguimos buscar os usuários, verifique suas permissões e tente novamente."}})},a.getOrganization=function(){a.organizationMessage={status:"loading",message:"Buscando sua organização, aguarde um momento..."},e.getOrganization(n.securityEmbedded.getOrganizationHierarchyCode()).then(function(e){a.organizations=[e.data.data],delete a.organizationMessage},function(e){a.organizationMessage={status:"error",message:"Não conseguimos buscar as organizações, verifique suas permissões e tente novamente."}})},a.getUserByEmail=function(n){a.userMessage={status:"loading",message:"Buscando o usuário, aguarde um momento..."},e.getUserByEmail(n).then(function(e){e.data?(a.user=e.data,a.user.confirmPassword=angular.copy(a.user.password),delete a.userMessage):a.userMessage={status:"error",message:"Não conseguimos buscar o usuário, verifique suas permissões e tente novamente."}},function(e){a.userMessage={status:"error",message:"Não conseguimos buscar o usuário, verifique suas permissões e tente novamente."}})},a.getRolesByInstance=function(){e.getRolesByInstance().then(function(e){a.perfis=[],e.data.forEach(function(e){var n=e.users.filter(function(e){return e.id===a.variables.userSelected.id}).length>0,t={id:e.id,idUser:a.variables.userSelected.id,description:e.name,exists:n};a.perfis.push(t)})})},a.removeUserInOrganization=function(n){e.removeUserInOrganization(n.id,a.variables.organizationSelected.hierarchyCode).then(function(e){a.listUsers(a.variables.organizationSelected)})},a.addUserInOrganization=function(n){a.addingUser=!0,n.organizations.push(a.variables.organizationSelected),e.saveUser(n).then(function(e){a.editUser(n),a.addingUser=!1},function(e){a.addingUser=!1})},a.addUserInRole=function(n){n.disabled=!0,e.addUserInRole(n.idUser,n.id).then(function(e){n.exists=!0,a.getRolesByInstance()},function(e){n.disabled=!1})},a.removeUserInRole=function(n){n.disabled=!0,e.removeUserInRole(n.idUser,n.id).then(function(e){n.exists=!0,a.getRolesByInstance()},function(e){n.disabled=!1})},a.listUsers=function(e){a.filterUser="",delete a.users,a.alterView("list-users"),a.variables.organizationSelected=angular.copy(e),a.getUsersByOrganization(a.variables.organizationSelected.id)},a.editUser=function(e){a.perfis=[],delete a.userExists,a.disabledSaveUser=!1,delete a.user,a.alterView("edit-user"),a.variables.userSelected=angular.copy(e),a.getUserByEmail(a.variables.userSelected.login),a.getRolesByInstance()},a.addNewUser=function(){a.perfis=[],a.disabledSaveUser=!1,a.user={},a.alterView("new-user"),a.variables.userSelected=angular.copy({})},a.saveUser=function(n){n.id||(n.organizations=[a.variables.organizationSelected]),e.saveUser(n).then(function(e){swal({title:"",type:"success",text:"Usuario salvo com sucesso"}),a.filterUser="",delete a.users,a.alterView("list-users"),a.getUsersByOrganization(a.variables.organizationSelected.id)})},a.validateUser=function(){a.disabledSaveUser=!0,delete a.userExists,e.getUserByEmail(a.user.login).then(function(e){return e.data&&e.data.id?void(a.userExists=e.data):void(a.disabledSaveUser=!1)},function(e){a.disabledSaveUser=!1})},a.userIsInTheOrganization=function(){var e=!0;return a.variables.userSelected&&a.variables.userSelected.id&&a.variables.organizationSelected&&a.variables.userSelected.organizations&&(e=a.variables.userSelected.organizations.filter(function(e){return e.id==a.variables.organizationSelected.id}).length>0),e},a.editOrg=function(e){a.variables.organizationSelected=void 0,a.organization=angular.copy(e),a.alterView("edit-org")},a.newOrg=function(e,n){a.variables.organizationSelected=n.$parent.$modelValue,a.organization=angular.copy({}),a.alterView("new-org"),delete a.disabledSaveOrganization},a.saveOrganization=function(n){n.subOrganizations=n.subOrganizations||[],a.disabledSaveOrganization=!0;var t;a.variables.organizationSelected?(n.mainOrganization={value:!1},a.variables.organizationSelected.subOrganizations.push(n),t=e.saveOrganization(a.organizations[0])):t=e.saveOrganization(n),t.then(function(e){a.alterView("list-orgs"),swal({title:"",type:"success",text:"Organização salva com sucesso"}),a.disabledSaveOrganization=!1,a.getOrganization()},function(e){a.disabledSaveOrganization=!1,swal({title:"",type:"error",text:e.data.details})})},a.getOrganization()}}};o.$inject=["SecurityEmbeddedUserService","$window"],n.default=o},function(e,n){"use strict";function t(e,n){var t=n.securityEmbedded.appURL,o={},i=function(){return{gumgaToken:n.securityEmbedded?n.securityEmbedded.getToken():0}};return o.getUsersByOrganization=function(n){return e.get(t+"/api/security-embedded/organization/"+n+"/users",{headers:i()})},o.getOrganization=function(n){return e.get(t+"/api/security-embedded/organization/"+n,{headers:i()})},o.getUserByEmail=function(n){return e.get(t+"/api/security/user-by-email/"+n+"/",{headers:i()})},o.getRolesByInstance=function(){return e.get(t+"/api/security/role-by-instance",{headers:i()})},o.addUserInOrganization=function(n){return e.get(t+"/api/security/add-user-organization/"+n,{headers:i()})},o.removeUserInOrganization=function(n,o){return e.get(t+"/api/security/remove-user-organization/"+n+"/"+o,{headers:i()})},o.addUserInOrganization=function(n){return e.get(t+"/api/security/add-user-organization/"+n,{headers:i()})},o.addUserInRole=function(n,o){return e.get(t+"/api/security/add-user-role/"+n+"/"+o,{headers:i()})},o.removeUserInRole=function(n,o){return e.get(t+"/api/security/remove-user-role/"+n+"/"+o,{headers:i()})},o.saveUser=function(n){return e.post(t+"/api/security-embedded/save-user",n,{headers:i()})},o.saveOrganization=function(n){return e.post(t+"/api/security-embedded/save-organization",n,{headers:i()})},o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t,t.$inject=["$http","$window"]}]);